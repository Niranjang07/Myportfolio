{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import'./Register.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Register(){const navigate=useNavigate();const[formData,setFormData]=useState({username:'',email:'',password:'',role:'peer'});const[loading,setLoading]=useState(false);const[error,setError]=useState('');const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();setError('');if(formData.password.length<6){setError('Password must be at least 6 characters long.');return;}setLoading(true);try{const res=await fetch('http://localhost:5000/api/auth/register',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});const contentType=res.headers.get('content-type');if(!contentType||!contentType.includes('application/json')){throw new Error('Server returned non-JSON response.');}const data=await res.json();if(!res.ok){setError(data.message||'Registration failed');setLoading(false);return;}alert('âœ… Registration successful!');navigate('/login');}catch(err){setError(err.message||'Unexpected error occurred');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"video\",{autoPlay:true,muted:true,loop:true,className:\"register-bg-video\",children:/*#__PURE__*/_jsx(\"source\",{src:\"/videos/register.mp4\",type:\"video/mp4\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"register-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"register-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDE80 Join the Peer Space\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Fill out the form to request access to the community.\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",placeholder:\"Username\",value:formData.username,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",value:formData.email,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",value:formData.password,onChange:handleChange,required:true}),/*#__PURE__*/_jsxs(\"select\",{name:\"role\",value:formData.role,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"peer\",children:\"Peer\"}),/*#__PURE__*/_jsx(\"option\",{value:\"guest\",children:\"Guest\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-text\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"register-btn\",disabled:loading,children:loading?'Registering...':'Register'})]})})]});}export default Register;","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Register","navigate","formData","setFormData","username","email","password","role","loading","setLoading","error","setError","handleChange","e","target","name","value","handleSubmit","preventDefault","length","res","fetch","method","headers","body","JSON","stringify","contentType","get","includes","Error","data","json","ok","message","alert","err","children","autoPlay","muted","loop","className","src","type","onSubmit","placeholder","onChange","required","disabled"],"sources":["C:/Users/niran/bmi/src/pages/Register.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './Register.css';\r\n\r\nfunction Register() {\r\n  const navigate = useNavigate();\r\n  const [formData, setFormData] = useState({\r\n    username: '',\r\n    email: '',\r\n    password: '',\r\n    role: 'peer',\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n\r\n    if (formData.password.length < 6) {\r\n      setError('Password must be at least 6 characters long.');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const res = await fetch('http://localhost:5000/api/auth/register', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      const contentType = res.headers.get('content-type');\r\n      if (!contentType || !contentType.includes('application/json')) {\r\n        throw new Error('Server returned non-JSON response.');\r\n      }\r\n\r\n      const data = await res.json();\r\n      if (!res.ok) {\r\n        setError(data.message || 'Registration failed');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      alert('âœ… Registration successful!');\r\n      navigate('/login');\r\n    } catch (err) {\r\n      setError(err.message || 'Unexpected error occurred');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <video autoPlay muted loop className=\"register-bg-video\">\r\n        <source src=\"/videos/register.mp4\" type=\"video/mp4\" />\r\n      </video>\r\n\r\n      <div className=\"register-container\">\r\n        <form onSubmit={handleSubmit} className=\"register-form\">\r\n          <h2>ðŸš€ Join the Peer Space</h2>\r\n          <p>Fill out the form to request access to the community.</p>\r\n\r\n          <input type=\"text\" name=\"username\" placeholder=\"Username\" value={formData.username} onChange={handleChange} required />\r\n          <input type=\"email\" name=\"email\" placeholder=\"Email\" value={formData.email} onChange={handleChange} required />\r\n          <input type=\"password\" name=\"password\" placeholder=\"Password\" value={formData.password} onChange={handleChange} required />\r\n          <select name=\"role\" value={formData.role} onChange={handleChange} required>\r\n            <option value=\"peer\">Peer</option>\r\n            <option value=\"guest\">Guest</option>\r\n          </select>\r\n\r\n          {error && <p className=\"error-text\">{error}</p>}\r\n\r\n          <button type=\"submit\" className=\"register-btn\" disabled={loading}>\r\n            {loading ? 'Registering...' : 'Register'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}