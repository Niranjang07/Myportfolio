{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./LoginSuccess.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginSuccess(){const[peers,setPeers]=useState([]);const[requestsSent,setRequestsSent]=useState([]);// Static notifications for now\nconst notifications=[{id:1,message:'‚úÖ Alice accepted your chat request.'},{id:2,message:'‚úÖ Charlie accepted your chat request.'}];// üß† Fetch real peers from backend\nuseEffect(()=>{const fetchPeers=async()=>{const token=localStorage.getItem('token');try{const res=await fetch('http://localhost:5000/api/auth/users',{headers:{Authorization:`Bearer ${token}`}});if(!res.ok){throw new Error('Failed to fetch peers');}const data=await res.json();setPeers(data);}catch(err){console.error('Error fetching peers:',err);}};fetchPeers();},[]);const sendRequest=peerId=>{if(!requestsSent.includes(peerId)){setRequestsSent([...requestsSent,peerId]);alert('Chat request sent!');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-success-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83C\\uDF89 Welcome to the Peer Community\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"community-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Join a Community:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"community-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{children:\"\\uD83D\\uDC68\\u200D\\uD83D\\uDCBB Software Engineers\"}),/*#__PURE__*/_jsx(\"button\",{children:\"\\uD83D\\uDCCA Data Analysts\"}),/*#__PURE__*/_jsx(\"button\",{children:\"\\u2601\\uFE0F Cloud Engineers\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"peer-list\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Available Peers\"}),peers.map(peer=>/*#__PURE__*/_jsxs(\"div\",{className:\"peer-card\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[peer.username,\" \\u2014 \",peer.role]}),/*#__PURE__*/_jsx(\"button\",{disabled:requestsSent.includes(peer._id),onClick:()=>sendRequest(peer._id),children:requestsSent.includes(peer._id)?'Request Sent':'Send Request'})]},peer._id))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"notifications\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDD14 Notifications\"}),/*#__PURE__*/_jsx(\"ul\",{children:notifications.map(note=>/*#__PURE__*/_jsx(\"li\",{children:note.message},note.id))})]})]});}export default LoginSuccess;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","LoginSuccess","peers","setPeers","requestsSent","setRequestsSent","notifications","id","message","fetchPeers","token","localStorage","getItem","res","fetch","headers","Authorization","ok","Error","data","json","err","console","error","sendRequest","peerId","includes","alert","className","children","map","peer","username","role","disabled","_id","onClick","note"],"sources":["C:/Users/niran/bmi/src/pages/LoginSuccess.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './LoginSuccess.css';\r\n\r\nfunction LoginSuccess() {\r\n  const [peers, setPeers] = useState([]);\r\n  const [requestsSent, setRequestsSent] = useState([]);\r\n\r\n  // Static notifications for now\r\n  const notifications = [\r\n    { id: 1, message: '‚úÖ Alice accepted your chat request.' },\r\n    { id: 2, message: '‚úÖ Charlie accepted your chat request.' },\r\n  ];\r\n\r\n  // üß† Fetch real peers from backend\r\n  useEffect(() => {\r\n    const fetchPeers = async () => {\r\n      const token = localStorage.getItem('token');\r\n\r\n      try {\r\n        const res = await fetch('http://localhost:5000/api/auth/users', {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        if (!res.ok) {\r\n          throw new Error('Failed to fetch peers');\r\n        }\r\n\r\n        const data = await res.json();\r\n        setPeers(data);\r\n      } catch (err) {\r\n        console.error('Error fetching peers:', err);\r\n      }\r\n    };\r\n\r\n    fetchPeers();\r\n  }, []);\r\n\r\n  const sendRequest = (peerId) => {\r\n    if (!requestsSent.includes(peerId)) {\r\n      setRequestsSent([...requestsSent, peerId]);\r\n      alert('Chat request sent!');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-success-container\">\r\n      <h2>üéâ Welcome to the Peer Community</h2>\r\n\r\n      <div className=\"community-section\">\r\n        <h3>Join a Community:</h3>\r\n        <div className=\"community-buttons\">\r\n          <button>üë®‚Äçüíª Software Engineers</button>\r\n          <button>üìä Data Analysts</button>\r\n          <button>‚òÅÔ∏è Cloud Engineers</button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"peer-list\">\r\n        <h3>Available Peers</h3>\r\n        {peers.map((peer) => (\r\n          <div key={peer._id} className=\"peer-card\">\r\n            <span>{peer.username} ‚Äî {peer.role}</span>\r\n            <button\r\n              disabled={requestsSent.includes(peer._id)}\r\n              onClick={() => sendRequest(peer._id)}\r\n            >\r\n              {requestsSent.includes(peer._id) ? 'Request Sent' : 'Send Request'}\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"notifications\">\r\n        <h3>üîî Notifications</h3>\r\n        <ul>\r\n          {notifications.map(note => (\r\n            <li key={note.id}>{note.message}</li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginSuccess;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}